{"version":3,"file":"dynamicconfig.model.js","sourceRoot":"","sources":["../../../src/modules/dynamic/dynamicconfig.model.ts"],"names":[],"mappings":"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","sourcesContent":["import { AppModel } from './../app/app.model';\nimport { model, Model, type, io, query, validate, ObjectId, mongo, Policies } from '../../';\nlet debug = require('debug')('app:models:dynamicconfig');\n\nexport interface DynamicField {\n  name: string;\n  type: 'any' | 'string' | 'integer' | 'float' | 'boolean' | 'date' | 'array' | 'object' | 'file' | 'files' | 'model' | 'models';\n  options: any;\n  required: boolean;\n  filterable: 'no' | 'auto' | 'equal' | 'number' | 'text' | 'categories' | 'tags' | 'date' | 'id' | 'ids' | 'boolean';\n  searchable: boolean;\n  sortable: boolean;\n}\n\n@model('dynamicconfig')\nexport class DynamicConfigModel extends Model {\n\n  @type.model({model: AppModel})\n  @io.all\n  @validate.required\n  @query.filterable({type: 'auto'})\n  @mongo.index({type: 'single'})\n  public appId: ObjectId | null = null;\n\n  @type.model({model:AppModel})\n  @io.all\n  @validate.required\n  @query.filterable({type: 'auto'})\n  @mongo.index({type: 'single'})\n  public relatedToAppId: ObjectId | null = null;\n\n  @type.string\n  @io.all\n  @validate.required\n  @query.sortable\n  public name: string = '';\n\n  @type.string\n  @io.all\n  @validate.slug\n  @validate.required\n  @mongo.index({type: 'single'})\n  public slug: string = '';\n\n  @type.boolean\n  @io.all\n  public isPublic: boolean = false;\n\n  @type.select({options: ['all', 'creator', 'users', 'usersWithRoles']})\n  @io.all\n  public readingAccess: string = 'all';\n\n  @type.array({type: 'string'})\n  @io.all\n  public readingRoles: Array<string> = [];\n  \n  @type.select({options: ['all', 'creator', 'users', 'usersWithRoles']})\n  @io.all\n  public writingAccess: string = 'all';\n  \n  @type.array({type: 'string'})\n  @io.all\n  public writingRoles: Array<string> = [];\n\n  @type.array({type: 'object', options: {\n    keys: {\n      name: {type: 'string'},\n      options: {type: 'any'},\n      required: {type: 'boolean'},\n      type: {type: 'string'},\n      validation: {type: 'array', options: {type: 'any'}},\n      filterable: {type: 'string'},\n      searchable: {type: 'boolean'},\n      sortable: {type: 'boolean'},\n    }\n  }})\n  @io.all\n  public fields: Array<DynamicField> = [];\n\n  @type.string\n  @io.all\n  public label: string;\n\n  @type.boolean\n  @io.all\n  public enableAdminNotification = false;\n\n  @type.boolean\n  @io.all\n  public enableUserNotification = false;\n\n  @type.select({options: ['email'], multiple: true})\n  @io.all\n  public notificationType: 'email' = 'email';\n\n  @type.select({options: ['create', 'edit', 'delete'], multiple: true})\n  @io.all\n  public notifyWhen: 'create' | 'edit' | 'delete' = 'create';\n\n  @type.string\n  //@validate.email // because it can also be notify:userId\n  @io.all\n  public notificationAdminEmail: string;\n\n  @type.string\n  @io.all\n  public notificationAdminSubject: string;\n\n  @type.string\n  @io.all\n  public notificationAdminContentPrefix: string;\n\n  @type.string\n  @io.all\n  public notificationAdminContentSuffix: string;\n\n  @type.string\n  @io.all\n  public notificationAdminTemplate: string;\n\n  @type.string\n  @io.all\n  public notificationUserField: string;\n\n  @type.string\n  @io.all\n  public notificationUserSubject: string;\n\n  @type.string\n  @io.all\n  public notificationUserContentPrefix: string;\n\n  @type.string\n  @io.all\n  public notificationUserContentSuffix: string;\n\n  @type.string\n  @io.all\n  public notificationUserTemplate: string;\n\n  @type.object({keys: {\n    globalModelPolicy: {type: 'any'},\n    readModelPolicy: {type: 'any'},\n    writeModelPolicy: {type: 'any'},\n    getAllPolicy: {type: 'any'},\n    getOnePolicy: {type: 'any'},\n    postPolicy: {type: 'any'},\n    putPolicy: {type: 'any'},\n    deletePolicy: {type: 'any'},\n    globalIOPolicy: {type: 'any'},\n    inputPolicy: {type: 'any'},\n    outputPolicy: {type: 'any'}\n  }})\n  @io.all\n  public policy: Policies.Policy = {};\n\n}"]}