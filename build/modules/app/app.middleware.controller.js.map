{"version":3,"file":"app.middleware.controller.js","sourceRoot":"","sources":["../../../src/modules/app/app.middleware.controller.ts"],"names":[],"mappings":";;AAAA,8BAAyC;AACzC,uFAAiF;AAEjF,IAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,gCAAgC,CAAC,CAAC;AAE/D,MAAa,uBAAwB,SAAQ,wDAAyB;IACpE,WAAW,CAAE,OAAiB,EAAE,GAAY,EAAE,GAAa;QACzD,OAAO,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE;YACrD,IAAI,OAAO,GAAc,CAAc,CAAC;YACxC,4CAA4C;YAC5C,IAAI,SAAS,GAAG,YAAQ,CAAC,WAAW,EAAE,CAAC;YACvC,IAAI,UAAU,GAAG,YAAQ,CAAC,WAAW,EAAE,CAAC;YACxC,OAAO,CAAC,UAAU,GAAG,CAAC;oBACpB,GAAG,EAAE,SAAS;oBACd,IAAI,EAAE,gBAAgB;iBACvB,CAAC,CAAC;YACH,OAAO,CAAC,WAAW,GAAG,CAAC;oBACrB,GAAG,EAAE,UAAU;oBACf,IAAI,EAAE,iBAAiB;iBACxB,CAAC,CAAC;YACH,OAAO,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;IACL,CAAC;IAAA,CAAC;CAGH;AApBD,0DAoBC","sourcesContent":["import { Model, AppModel } from '../../';\nimport { AccessControllerMiddlware } from '../user/access.middleware.controller';\nimport { Request, Response } from 'express';\nlet debug = require('debug')('app:middleware:controllers:app');\n\nexport class AppControllerMiddleware extends AccessControllerMiddlware {\n  postElement (element: AppModel, req: Request, res: Response): Promise<Model> {\n    return super.postElement(element, req, res).then((e) => {\n      let element: AppModel = (e as AppModel);\n      // create random private and public api keys\n      let publicKey = AppModel.generateKey();\n      let privateKey = AppModel.generateKey();\n      element.publicKeys = [{\n        key: publicKey,\n        name: 'API Public Key'\n      }];\n      element.privateKeys = [{\n        key: privateKey,\n        name: 'API Private Key'\n      }];\n      return Promise.resolve(element);\n    });\n  };\n\n  \n}"]}