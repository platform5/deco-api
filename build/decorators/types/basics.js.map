{"version":3,"file":"basics.js","sourceRoot":"","sources":["../../../src/decorators/types/basics.ts"],"names":[],"mappings":"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","sourcesContent":["import { TypeDecorator } from './type-decorator';\nimport moment from 'moment';\nimport { Settings } from '../../helpers/settings';\nimport { DateHelper } from '../../helpers/date';\nlet debug = require('debug')('deco-api:decorators:types:basics');\n\nexport let anyDecorator = new TypeDecorator('any');\nexport const any = anyDecorator.decorator();\n\nexport let idDecorator = new TypeDecorator('id');\nexport const id = idDecorator.decorator();\n\nexport let inputString = (value: any) => {\n  if (value === 'null') value = null;\n  if (value === 'undefined') value = undefined;\n  if (value !== null && value !== undefined && typeof value !== 'string' && value.toString) {\n    value = value.toString();\n  }\n  return value;\n};\nexport let validateString = (value: any, options?: any) => {\n  if (value === null || value === undefined) return true;\n  if (!options || !options.multilang && typeof value === 'string') return true;\n  // here we validate multilang strings\n  if (typeof value !== 'object') return false;\n  for (let key in value) {\n    if (options.locales.length && options.locales.indexOf(key) === -1) return false;\n  }\n  return true;\n};\nexport let stringDecorator = new TypeDecorator('string');\nstringDecorator.defaultOptions = {\n  multilang: false,\n  locales: []\n};\nstringDecorator.input = (key: string, value: any, options: any, element: any, target: any) => {\n  if (!options || !options.multilang) return Promise.resolve(inputString(value));\n\n  let locale = '';\n  let reqLocale = (element.request.query && element.request.query.locale) ? element.request.query.locale : '';\n  if (reqLocale && options.locales.indexOf(reqLocale) !== -1) {\n    locale = element.request.query.locale;\n  } else if (reqLocale && options.locales.length === 0) {\n    locale = element.request.query.locale;\n  } else if (reqLocale === 'all') {\n    locale = '';\n  } else if (reqLocale) {\n    return Promise.reject(new Error('Invalid locale requested'));\n  }\n\n  if (locale && element[key] && typeof element[key] === 'object' && typeof value === 'string') {\n    let tmpValue = element[key];\n    tmpValue[locale] = value;\n    value = tmpValue;\n  } else if (locale && typeof value === 'string') {\n    let tmpValue: any = {};\n    tmpValue[locale] = value;\n    value = tmpValue;\n  }\n\n  if (!locale && typeof value === 'string') {\n    return Promise.reject(new Error('Multilang string value must be an object if ?locale is not defined'));\n  } else {\n    // only keep valid locale\n    let tmpValue: any = {};\n    for (let key in value) {\n      if (options.locales.length && options.locales.indexOf(key) === -1) continue;\n      tmpValue[key] = value[key];\n    }\n    value = tmpValue;\n  }\n\n  return Promise.resolve(value);\n};\nstringDecorator.output = (key: string, value: any, options: any, element: any, target: any) => {\n  if (!options || !options.multilang) return Promise.resolve(value);\n\n  let locale = Settings.locale(element.request, options);\n  if (locale === 'all') {\n    // do nothing, send all locales\n  } else if (locale && value !== null && typeof value === 'object') {\n    if (options.locales.length && options.locales.indexOf(locale) === -1) return Promise.reject(new Error('Invalid locale requested'));\n    // send only the requested locale\n    let originalValue = value;\n    value = value[locale];\n    // if we request a refLocale\n    let refLocale = (element.request && element.request.query && element.request.query.reflocale) ? element.request.query.reflocale : '';\n    let refLocaleIsValid = false;\n    if (options.locales.length && options.locales.indexOf(refLocale) !== -1) {\n      refLocaleIsValid = true;\n    } else if (options.locales.length === 0) {\n      refLocaleIsValid = true;\n    }\n    if (refLocaleIsValid) {\n      if (!element._refLocales) element._refLocales = {};\n      if (!element._refLocales[refLocale]) element._refLocales[refLocale] = {};\n      element._refLocales[refLocale][key] = originalValue[refLocale];\n    }\n  }\n  return Promise.resolve(value);\n};\nstringDecorator.validate = (value: any, obj: any, options: any) => {\n  return validateString(value, options);\n};\nexport const string = stringDecorator.decorator();\n\nexport let selectDecorator = new TypeDecorator('select');\nselectDecorator.defaultOptions = {\n  options: [],\n  multiple: false,\n  allowAny: false\n};\nselectDecorator.input = (key: string, value: any, options: any, element: any, target: any) => {\n  if (value === 'null') value = null;\n  if (value === 'undefined') value = undefined;\n  if (value === null || value === undefined) return Promise.resolve(value);\n  if (options.multiple && !Array.isArray(value)) value = [value];\n  if (!options.multiple && Array.isArray(value)) value = value.join(',');\n  return Promise.resolve(value);\n};\nselectDecorator.validate = (value: any, obj: any, options: any) => {\n  if (value === undefined || value === null) return true;\n  if (!options.multiple) {\n    // validate non-multiple values\n    if (typeof value !== 'string') return false;\n    if (options.allowAny) return true;\n    if (options.options.indexOf(value) === -1) return false;\n  } else if (options.multiple) {\n    // validate multiple values\n    if (!Array.isArray(value)) return false;\n    for (let v of value) {\n      if (typeof v !== 'string') return false;\n      if (!options.allowAny && options.options.indexOf(v) === -1) return false;\n    }\n  }\n  return true;\n};\nexport const select = selectDecorator.decorator();\n\nexport let inputInteger = (value: any) => {\n  if (value === 'null') value = null;\n  if (value === 'undefined') value = undefined;\n  if (typeof value === 'string') {\n    let int = parseInt(value, 10);\n    if (int.toString() === value) {\n      value = int;\n    }\n  };\n  return value;\n};\nexport let validateInteger = (value: any) => {return value === null || value === undefined || (typeof value === 'number' && Math.round(value) === value)};\nexport let integerDecorator = new TypeDecorator('integer');\nintegerDecorator.input = (key: string, value: any, options: any, element: any, target: any) => {\n  return Promise.resolve(inputInteger(value));\n};\nintegerDecorator.validate = (value: any, obj: any, options: any) => {\n  return validateInteger(value);\n};\nexport const integer = integerDecorator.decorator();\n\nexport let inputBoolean = (value: any) => {\n  if (value === 'null') value = undefined;\n  if (value === 'undefined') value = undefined;\n  if (value === 1 || value === '1' || value === 'true') {\n    value = true;\n  } else if (value === 0 || value === '0' || value === 'false') {\n    value = false;\n  }\n  if (value !== true && value !== false && value !== undefined) value = undefined;\n  return value;\n};\nexport let validateBoolean = (value: any) => {return value === null || value === undefined || typeof value === 'boolean'};\nexport let booleanDecorator = new TypeDecorator('boolean');\nbooleanDecorator.input = (key: string, value: any, options: any, element: any, target: any) => {\n  return Promise.resolve(inputBoolean(value));\n};\nbooleanDecorator.validate = (value: any, obj: any, options: any) => {\n  return validateBoolean(value);\n};\n// booleanDecorator.toDocument = (updateQuery: UpdateQuery, key: string, value: any, operation: 'insert' | 'update' | 'upsert', options: any, element: any, target: any) => {\n//   if (value !== true && value !== false && value !== undefined) value = undefined;\n//   if (value === undefined && operation === 'insert') {\n//     return Promise.resolve();\n//   } else if (value === undefined) {\n//     updateQuery.unset(key);\n//   } else {\n//     updateQuery.set(key, value);\n//   }\n//   return Promise.resolve();\n// };\nexport const boolean = booleanDecorator.decorator();\n\nexport let inputDate = (value: any, dateFormat = Settings.defaultDateFormat) => {\n  if (value === 'null') value = null;\n  if (value === 'undefined') value = undefined;\n  if (typeof value === 'string') {\n    let date = moment(value, dateFormat, true);\n    if (date.isValid()) value = date.toDate();\n  }\n  return value;\n};\nexport let validateDate = (value: any, dateFormat?: string) => {\n  if (typeof value === 'string') {\n    // we do this string test / convert here because\n    // the validateDate can be called from an array or object validator\n    // which did not pass through the inputDate()\n    // in which case we suppose a ISO format\n    const date = dateFormat ? moment(value, dateFormat) : DateHelper.moment(value);\n    if (!date || !date.isValid()) {\n      debug('invalid date', value, '; dateFormat: ', dateFormat);\n      return false;\n    }\n    value = date.toDate();\n  }\n  return value === null || value === undefined || value instanceof Date\n};\nexport let dateDecorator = new TypeDecorator('date');\ndateDecorator.defaultOptions = {\n  dateFormat: Settings.defaultDateFormat\n};\ndateDecorator.input = (key: string, value: any, options: any, element: any, target: any) => {\n  let dateFormat = options.dateFormat || Settings.defaultDateFormat;\n  return Promise.resolve(inputDate(value, dateFormat));\n};\ndateDecorator.output = (key: string, value: any, options: any, element: any, target: any) => {\n  if (value instanceof Date) {\n    let dateFormat = options.dateFormat || Settings.defaultDateFormat;\n    value = moment(value).format(dateFormat);\n  }\n  return Promise.resolve(value);\n};\ndateDecorator.validate = (value: any, obj: any, options: any) => {\n  let dateFormat = options.dateFormat || undefined;\n  return validateDate(value, dateFormat);\n};\nexport const date = dateDecorator.decorator();\n\nexport let inputFloat = (value: any) => {\n  if (value === 'null') value = null;\n  if (value === 'undefined') value = undefined;\n  if (typeof value === 'string') {\n    let float = parseFloat(value);\n    if (float.toString() === value) {\n      value = float;\n    }\n  }\n  return value;\n};\nexport let validateFloat = (value: any) => {return value === null || value === undefined || (typeof value === 'number')};\nexport let floatDecorator = new TypeDecorator('float');\nfloatDecorator.input = (key: string, value: any, options: any, element: any, target: any) => {\n  return Promise.resolve(inputFloat(value));\n};\nfloatDecorator.validate = (value: any, obj: any, options: any) => {\n  return validateFloat(value);\n};\nexport const float = floatDecorator.decorator();"]}